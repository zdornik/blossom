<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ИИ Ассистент — BLOSSOM</title>
  <link rel="stylesheet" href="../css/style.css">
</head>
<body>
  <!-- Navigation -->
  <nav class="nav">
    <div class="nav-inner">
      <a href="../index.html" class="nav-logo">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/>
          <path d="M12 6v12M6 12h12"/>
        </svg>
        BLOSSOM
      </a>
      
      <div class="nav-links">
        <a href="analyze.html" class="nav-link">Анализ</a>
        <a href="products.html" class="nav-link">Мои продукты</a>
        <a href="compatibility.html" class="nav-link">Совместимость</a>
        <a href="assistant.html" class="nav-link active">ИИ Ассистент</a>
      </div>
      
      <div class="nav-actions">
        <a href="profile.html" class="btn btn-secondary btn-sm">Профиль</a>
        <a href="analyze.html" class="btn btn-primary btn-sm">Начать</a>
      </div>
      
      <button class="mobile-menu-btn" aria-expanded="false" aria-controls="mobileNav" onclick="toggleMobileMenu()">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <path d="M3 12h18M3 6h18M3 18h18"/>
        </svg>
      </button>
    </div>
    <div id="mobileNav" class="mobile-menu" hidden>
      <a href="analyze.html" class="mobile-link">Анализ</a>
      <a href="products.html" class="mobile-link">Мои продукты</a>
      <a href="compatibility.html" class="mobile-link">Совместимость</a>
      <a href="assistant.html" class="mobile-link">ИИ Ассистент</a>
      <a href="profile.html" class="mobile-link">Профиль</a>
      <a href="analyze.html" class="btn btn-primary btn-sm" style="width:100%;">Начать</a>
    </div>
  </nav>

  <!-- Assistant Section -->
  <section class="section section-hero">
    <div class="container">
      <div class="page-header">
        <h1 class="page-title">ИИ Ассистент</h1>
        <p class="page-subtitle">
          Задавай вопросы о составе, получай персональные рекомендации.
        </p>
      </div>
      
      <div class="chat-container">
        <div class="chat-messages" id="chatMessages">
          <!-- Welcome Message -->
          <div class="chat-message assistant">
            <div class="chat-avatar">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/>
                <path d="M12 6v12M6 12h12"/>
              </svg>
            </div>
            <div class="chat-bubble">
              Привет! Я ИИ-ассистент BLOSSOM. Я могу помочь тебе разобраться в составе косметики, объяснить действие ингредиентов и дать рекомендации по уходу. Что тебя интересует?
            </div>
          </div>
          
          <!-- Quick Questions -->
          <div style="margin: 1rem 0; display: flex; flex-wrap: wrap; gap: 0.5rem; padding: 0 3rem;">
            <button class="btn btn-secondary btn-sm" onclick="askQuestion('Что такое ниацинамид?')">
              Что такое ниацинамид?
            </button>
            <button class="btn btn-secondary btn-sm" onclick="askQuestion('Можно ли использовать ретинол беременным?')">
              Ретинол при беременности
            </button>
            <button class="btn btn-secondary btn-sm" onclick="askQuestion('Какой SPF лучше?')">
              Какой SPF лучше?
            </button>
            <button class="btn btn-secondary btn-sm" onclick="askQuestion('Что делать при раздражении?')">
              Раздражение кожи
            </button>
          </div>
        </div>
        
        <div class="chat-input-wrapper">
          <input 
            type="text" 
            id="chatInput" 
            placeholder="Введи свой вопрос..."
            onkeypress="handleKeyPress(event)"
          >
          <button class="btn btn-primary" onclick="sendMessage()">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="22" y1="2" x2="11" y2="13"/>
              <polygon points="22 2 15 22 11 13 2 9 22 2"/>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-bottom" style="border-top: none; padding-top: 0;">
        <p class="footer-copyright">&copy; 2026 BLOSSOM. Все права защищены.</p>
      </div>
    </div>
  </footer>

  <script>
    const responses = {
      'Что такое ниацинамид?': `Ниацинамид (витамин B3) — это многофункциональный ингредиент:

• Уменьшает покраснения и воспаления
• Регулирует выработку себума
• Осветляет пигментацию
• Укрепляет защитный барьер кожи
• Совместим с большинством других ингредиентов

Концентрация 2-5% подходит для большинства типов кожи.`,

      'Можно ли использовать ретинол беременным?': `Нет, ретинол и другие ретиноиды противопоказаны при беременности и кормлении грудью.

Вот безопасные альтернативы:
• Бакучиол — «растительный ретинол"
• Пептиды
• Витамин C
• Ниацинамид

Всегда консультируйся с врачом при выборе ухода во время беременности.`,

      'Какой SPF лучше?': `Рекомендации по SPF:

• SPF 30 — минимум для ежедневного использования
• SPF 50 — для длительного пребывания на солнце
• Широкий спектр (UVA + UVB) — обязательно

Типы фильтров:
• Химические: легкие, без белого налета
• Минеральные: цинк, титан — для чувствительной кожи
• Гибридные: сочетают оба типа

Наноси за 15-20 минут до выхода на солнце и обновляй каждые 2 часа.`,

      'Что делать при раздражении?': `При раздражении кожи:

1. Немедленно прекрати использование раздражающего продукта
2. Перейди на минимальный уход: мягкое очищение + увлажнение
3. Используй успокаивающие ингредиенты:
   • Пантенол
   • Аллантоин
   • Центелла азиатская
   • Овсянка

4. Избегай активных ингредиентов до полного восстановления
5. Обязательно используй SPF

Если раздражение не проходит в течение 3-5 дней — обратись к дерматологу.`,

      'default': `Спасибо за вопрос! 

Я могу помочь с:
• Объяснением действия ингредиентов
• Рекомендациями по уходу
• Проверкой совместимости продуктов
• Советами по решению проблем кожи

Попробуй спросить что-то конкретное, например: "Что делает гиалуроновая кислота?" или "Как убрать черные точки?"`
    };

    function handleKeyPress(e) {
      if (e.key === 'Enter') {
        sendMessage();
      }
    }

    function askQuestion(question) {
      document.getElementById('chatInput').value = question;
      sendMessage();
    }

    function sendMessage() {
      const input = document.getElementById('chatInput');
      const message = input.value.trim();
      
      if (!message) return;
      
      // Add user message
      addMessage(message, 'user');
      input.value = '';
      
      // Get response
      setTimeout(() => {
        const response = responses[message] || responses['default'];
        addMessage(response, 'assistant');
      }, 500);
    }

    function addMessage(text, role) {
      const container = document.getElementById('chatMessages');
      const messageDiv = document.createElement('div');
      messageDiv.className = `chat-message ${role}`;
      
      const avatar = role === 'assistant' 
        ? `<div class="chat-avatar"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/><path d="M12 6v12M6 12h12"/></svg></div>`
        : `<div class="chat-avatar"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg></div>`;
      
      messageDiv.innerHTML = `
        ${avatar}
        <div class="chat-bubble">${text.replace(/\n/g, '<br>')}</div>
      `;
      
      container.appendChild(messageDiv);
      container.scrollTop = container.scrollHeight;
    }

    function toggleMobileMenu() {
      const menu = document.getElementById('mobileNav');
      const btn = document.querySelector('.mobile-menu-btn');
      const isOpen = menu.hasAttribute('hidden') ? false : true;
      if (isOpen) {
        menu.setAttribute('hidden', '');
        btn.setAttribute('aria-expanded', 'false');
      } else {
        menu.removeAttribute('hidden');
        btn.setAttribute('aria-expanded', 'true');
      }
    }
  </script>
</body>
</html>
