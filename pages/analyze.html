<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#7E9D6C">
  <link rel="manifest" href="/manifest.webmanifest">
  <link rel="apple-touch-icon" href="/icons/icon-192.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <title>Анализ продукта — BLOSSOM</title>
  <link rel="stylesheet" href="../css/style.css">
</head>
<body>
  <!-- Navigation -->
  <nav class="nav">
    <div class="nav-inner">
      <a href="../index.html" class="nav-logo">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/>
          <path d="M12 6v12M6 12h12"/>
        </svg>
        BLOSSOM
      </a>
      
      <div class="nav-links">
        <a href="analyze.html" class="nav-link active">Анализ</a>
        <a href="products.html" class="nav-link">Мои продукты</a>
        <a href="compatibility.html" class="nav-link">Совместимость</a>
        <a href="assistant.html" class="nav-link">ИИ Ассистент</a>
      </div>
      
      <div class="nav-actions">
        <a href="profile.html" class="btn btn-secondary btn-sm">Профиль</a>
        <a href="analyze.html" class="btn btn-primary btn-sm">Начать</a>
      </div>
      
      <button class="mobile-menu-btn" aria-expanded="false" aria-controls="mobileNav" onclick="toggleMobileMenu()">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <path d="M3 12h18M3 6h18M3 18h18"/>
        </svg>
      </button>
    </div>
    <div id="mobileNav" class="mobile-menu" hidden>
      <a href="analyze.html" class="mobile-link">Анализ</a>
      <a href="products.html" class="mobile-link">Мои продукты</a>
      <a href="compatibility.html" class="mobile-link">Совместимость</a>
      <a href="assistant.html" class="mobile-link">ИИ Ассистент</a>
      <a href="profile.html" class="mobile-link">Профиль</a>
      <a href="analyze.html" class="btn btn-primary btn-sm" style="width:100%;">Начать</a>
    </div>
  </nav>

  <!-- Analysis Section -->
  <section class="section section-hero">
    <div class="container">
      <div class="page-header">
        <h1 class="page-title">Проанализировать продукт</h1>
        <p class="page-subtitle">
          Вставь список ингредиентов, и ИИ проведет полный анализ безопасности и совместимости.
        </p>
      </div>
      
      <div class="analysis-form">
        <div class="textarea-wrapper">
          <textarea 
            id="ingredientsInput"
            placeholder="Вставь состав продукта здесь...&#10;&#10;Например:&#10;Aqua, Glycerin, Niacinamide, Sodium Hyaluronate, Tocopherol, Linalool..."
          ></textarea>
          <span class="textarea-hint">Поддерживает формат INCI</span>
        </div>
        
        <div style="display: flex; gap: 1rem; flex-wrap: wrap; justify-content: center;">
          <button class="btn btn-primary" onclick="analyzeProduct()">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="11" cy="11" r="8"/>
              <path d="M21 21l-4.35-4.35"/>
            </svg>
            Проанализировать
          </button>
          <button class="btn btn-secondary" onclick="scanProduct()">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="18" height="18" rx="2"/>
              <path d="M3 9h18M9 21V9"/>
            </svg>
            Отсканировать этикетку
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- Results Section (Hidden by default) -->
  <section class="section" id="resultsSection" style="display: none; background: white;">
    <div class="container">
      <div class="card" style="max-width: 1000px; margin: 0 auto;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem;">
          <div>
            <h2 class="section-title">Результаты анализа</h2>
            <p class="section-subtitle" style="margin-bottom: 0;">Увлажняющий крем Hydra-Glow</p>
          </div>
          <span class="status-badge status-safe">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20 6L9 17l-5-5"/>
            </svg>
            Безопасно
          </span>
        </div>
        
        <!-- Scores -->
        <div class="scores-grid">
          <div class="score-card">
            <div class="score-ring-container">
              <div class="score-ring" data-score="92">
                <svg viewBox="0 0 100 100">
                  <circle class="score-ring-bg" cx="50" cy="50" r="45"/>
                  <circle class="score-ring-progress" cx="50" cy="50" r="45"/>
                </svg>
                <div class="score-ring-value">
                  <div class="score-ring-number">92</div>
                  <div class="score-ring-total">/100</div>
                </div>
              </div>
              <span class="score-ring-label">Безопасность</span>
            </div>
          </div>
          
          <div class="score-card">
            <div class="score-ring-container">
              <div class="score-ring" data-score="78">
                <svg viewBox="0 0 100 100">
                  <circle class="score-ring-bg" cx="50" cy="50" r="45"/>
                  <circle class="score-ring-progress" cx="50" cy="50" r="45" style="stroke: var(--blossom-caution);"/>
                </svg>
                <div class="score-ring-value">
                  <div class="score-ring-number">78</div>
                  <div class="score-ring-total">/100</div>
                </div>
              </div>
              <span class="score-ring-label">Натуральность</span>
            </div>
          </div>
          
          <div class="score-card">
            <div class="score-ring-container">
              <div class="score-ring" data-score="88">
                <svg viewBox="0 0 100 100">
                  <circle class="score-ring-bg" cx="50" cy="50" r="45"/>
                  <circle class="score-ring-progress" cx="50" cy="50" r="45"/>
                </svg>
                <div class="score-ring-value">
                  <div class="score-ring-number">88</div>
                  <div class="score-ring-total">/100</div>
                </div>
              </div>
              <span class="score-ring-label">Совместимость</span>
            </div>
          </div>
        </div>
        
        <!-- Ingredients -->
        <h3 style="font-size: 1.1rem; margin: 2rem 0 1rem;">Состав продукта</h3>
        
        <div class="ingredient-row">
          <div class="ingredient-icon safe">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20 6L9 17l-5-5"/>
            </svg>
          </div>
          <div>
            <p class="ingredient-name">Aqua</p>
            <p class="ingredient-desc">Базовый растворитель</p>
          </div>
        </div>
        
        <div class="ingredient-row">
          <div class="ingredient-icon safe">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20 6L9 17l-5-5"/>
            </svg>
          </div>
          <div>
            <p class="ingredient-name">Glycerin</p>
            <p class="ingredient-desc">Увлажняющий компонент (гумектант)</p>
          </div>
        </div>
        
        <div class="ingredient-row">
          <div class="ingredient-icon safe">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20 6L9 17l-5-5"/>
            </svg>
          </div>
          <div>
            <p class="ingredient-name">Niacinamide</p>
            <p class="ingredient-desc">Осветление и поддержка барьера кожи</p>
          </div>
        </div>
        
        <div class="ingredient-row">
          <div class="ingredient-icon safe">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20 6L9 17l-5-5"/>
            </svg>
          </div>
          <div>
            <p class="ingredient-name">Sodium Hyaluronate</p>
            <p class="ingredient-desc">Глубокое увлажнение</p>
          </div>
        </div>
        
        <div class="ingredient-row">
          <div class="ingredient-icon safe">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20 6L9 17l-5-5"/>
            </svg>
          </div>
          <div>
            <p class="ingredient-name">Tocopherol</p>
            <p class="ingredient-desc">Антиоксидант (Витамин E)</p>
          </div>
        </div>
        
        <div class="ingredient-row">
          <div class="ingredient-icon caution">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
              <line x1="12" y1="9" x2="12" y2="13"/>
              <line x1="12" y1="17" x2="12.01" y2="17"/>
            </svg>
          </div>
          <div>
            <p class="ingredient-name">Linalool</p>
            <p class="ingredient-desc">Компонент отдушки (рекомендуется тест-патч)</p>
          </div>
        </div>
        
        <!-- AI Insights -->
        <h3 style="font-size: 1.1rem; margin: 2rem 0 1rem;">ИИ инсайты</h3>
        
        <div class="insights-grid">
          <div class="insight-card">
            <div class="insight-header">
              <div class="insight-icon benefit">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/>
                  <path d="M12 6v12M6 12h12"/>
                </svg>
              </div>
              <h4 style="font-weight: 600;">Польза</h4>
            </div>
            
            <div class="insight-item">
              <p class="insight-item-title">Увлажняющий эффект</p>
              <p class="insight-item-desc">Глицерин + гиалуроновая кислота удерживают влагу в коже.</p>
            </div>
            
            <div class="insight-item">
              <p class="insight-item-title">Поддержка барьера</p>
              <p class="insight-item-desc">Ниацинамид помогает снизить потерю воды со временем.</p>
            </div>
            
            <div class="insight-item">
              <p class="insight-item-title">Мягкий антиоксидант</p>
              <p class="insight-item-desc">Токоферол добавляет легкую защиту без раздражения.</p>
            </div>
          </div>
          
          <div class="insight-card">
            <div class="insight-header">
              <div class="insight-icon caution">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                  <line x1="12" y1="9" x2="12" y2="13"/>
                  <line x1="12" y1="17" x2="12.01" y2="17"/>
                </svg>
              </div>
              <h4 style="font-weight: 600;">Осторожно</h4>
            </div>
            
            <div class="insight-item">
              <p class="insight-item-title">Чувствительность к отдушке</p>
              <p class="insight-item-desc">Линалоол может вызвать реакции на чувствительной коже.</p>
            </div>
            
            <div class="insight-item">
              <p class="insight-item-title">Рекомендуется тест-патч</p>
              <p class="insight-item-desc">При первом использовании нанеси на небольшую область на 24ч.</p>
            </div>
            
            <div class="insight-item">
              <p class="insight-item-title">Все еще нужен SPF</p>
              <p class="insight-item-desc">Этот продукт не заменяет солнцезащитный крем.</p>
            </div>
          </div>
        </div>
        
        <!-- Actions -->
        <div style="display: flex; gap: 1rem; margin-top: 2rem; flex-wrap: wrap;">
          <button class="btn btn-primary" onclick="saveProduct()">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
              <polyline points="17 21 17 13 7 13 7 21"/>
              <polyline points="7 3 7 8 15 8"/>
            </svg>
            Сохранить в коллекцию
          </button>
          <a href="compatibility.html" class="btn btn-secondary">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
            </svg>
            Проверить совместимость
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-bottom" style="border-top: none; padding-top: 0;">
        <p class="footer-copyright">&copy; 2026 BLOSSOM. Все права защищены.</p>
      </div>
    </div>
  </footer>

  <script>
    function toggleMobileMenu() {
      const menu = document.getElementById('mobileNav');
      const btn = document.querySelector('.mobile-menu-btn');
      const isOpen = menu.hasAttribute('hidden') ? false : true;
      if (isOpen) {
        menu.setAttribute('hidden', '');
        btn.setAttribute('aria-expanded', 'false');
      } else {
        menu.removeAttribute('hidden');
        btn.setAttribute('aria-expanded', 'true');
      }
    }

    function animateScoreRings() {
      const rings = document.querySelectorAll('.score-ring');
      rings.forEach((ring) => {
        const value = parseInt(ring.dataset.score, 10);
        if (Number.isNaN(value)) return;
        const circle = ring.querySelector('.score-ring-progress');
        const circumference = 2 * Math.PI * 45;
        const offset = circumference * (1 - value / 100);
        circle.style.strokeDashoffset = circumference;
        requestAnimationFrame(() => {
          circle.style.strokeDashoffset = offset;
        });
      });
    }

    function analyzeProduct() {
      const input = document.getElementById('ingredientsInput').value;
      if (!input.trim()) {
        alert('Пожалуйста, введи состав продукта');
        return;
      }
      
      document.getElementById('resultsSection').style.display = 'block';
      document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });
      animateScoreRings();
    }
    
    function scanProduct() {
      alert('Функция сканирования этикетки будет доступна в мобильном приложении');
    }
    
    function saveProduct() {
      alert('Продукт сохранен в твою коллекцию!');
    }

    document.addEventListener('DOMContentLoaded', animateScoreRings);
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => navigator.serviceWorker.register('/sw.js').catch(console.error));
    }
  </script>
</body>
</html>
